<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Eedesiablox</title>
<style>
html,body{margin:0;padding:0;width:100%;height:100%;overflow:hidden;font-family:Verdana,sans-serif;}
body{background:linear-gradient(135deg,red,orange,yellow,green);}
canvas{display:block;position:absolute;top:0;left:0;}
#menu,#login,#chat,#multiplier{position:absolute;background:#ccc;border:2px solid #000;border-radius:4px;padding:5px;pointer-events:auto;}
#menu{top:10px;left:10px;}
#login{top:10px;right:10px;}
#chat{bottom:10px;right:10px;width:220px;height:150px;overflow:auto;}
#multiplier{bottom:10px;left:10px;font-weight:bold;font-size:16px;}
button,input{padding:5px;margin:2px;font-size:14px;}
</style>
</head>
<body>
<canvas id="game"></canvas>
<div id="menu">
<h3>Eedesiablox</h3>
<button onclick="showObby()">Obby</button>
<button onclick="showTycoon()">Tycoon</button>
<button id="musicbtn" onclick="toggleMusic()">Music On/Off</button>
</div>
<div id="login">
<input id="user" placeholder="Username"><br>
<input id="pass" type="password" placeholder="Password"><br>
<button onclick="login()">Login</button>
<button onclick="signup()">Sign Up</button>
</div>
<div id="chat"></div>
<div id="multiplier">Multiplier: x1</div>
<audio id="music" loop>
<source src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_5d1ee0f6c5.mp3?filename=calm-synthwave-11089.mp3" type="audio/mpeg">
</audio>
<script>
// Music toggle
const music=document.getElementById("music");
let musicOn=false;
function toggleMusic(){musicOn=!musicOn;if(musicOn){music.play();}else{music.pause();}}

// Login system (localStorage)
function signup(){
  const u=document.getElementById("user").value;
  const p=document.getElementById("pass").value;
  if(u&&p){localStorage.setItem(u,p);alert("Signed Up!");}
}
function login(){
  const u=document.getElementById("user").value;
  const p=document.getElementById("pass").value;
  if(localStorage.getItem(u)===p){alert("Logged In!");}else{alert("Wrong credentials");}
}

// Chat system
const chat=document.getElementById("chat");
function addChat(msg){const d=document.createElement("div");d.textContent=msg;chat.appendChild(d);chat.scrollTop=chat.scrollHeight;}
addChat("Welcome to Eedesiablox chat!");

// Multiplier
let multiplier=1;
function updateMultiplier(val){multiplier=val;document.getElementById("multiplier").innerText="Multiplier: x"+multiplier;}

// Canvas game setup
const c=document.getElementById("game"),ctx=c.getContext("2d");
let W=window.innerWidth,H=window.innerHeight;c.width=W;c.height=H;
let keys={};
window.addEventListener("keydown",e=>keys[e.key]=true);
window.addEventListener("keyup",e=>keys[e.key]=false);

// Player
let player={x:100,y:H-50,w:30,h:50,vy:0,jumping:false,color:"blue"};

// Platforms (Obby)
let platforms=[{x:0,y:H-20,w:W,h:20}];
for(let i=1;i<12;i++){platforms.push({x:i*120+50,y:H-20-40*i,w:80,h:20});}

// Checkpoints
let checkpoints=[{x:50,y:H-60},{x:300,y:H-180},{x:650,y:H-400}];
let lastCheckpoint={x:50,y:H-60};

// Main loop
function loop(){
  ctx.clearRect(0,0,W,H);
  // Player physics
  player.vy+=0.5;player.y+=player.vy;
  if(keys["ArrowLeft"])player.x-=5;
  if(keys["ArrowRight"])player.x+=5;
  // Collision
  platforms.forEach(p=>{
    ctx.fillStyle="black";
    ctx.fillRect(p.x,p.y,p.w,p.h);
    if(player.x< p.x+p.w && player.x+player.w>p.x && player.y< p.y+p.h && player.y+player.h>p.y && player.vy>=0){
      player.y=p.y-player.h;
      player.vy=0;
      player.jumping=false;
    }
  });
  // Checkpoint detection
  checkpoints.forEach(c=>{
    if(player.x>c.x-15 && player.x<c.x+15 && player.y>c.y-15 && player.y<c.y+15){
      lastCheckpoint=c;
      updateMultiplier(multiplier+0.1);
    }
  });
  // Fall below screen => reset
  if(player.y>H){player.x=lastCheckpoint.x;player.y=lastCheckpoint.y;player.vy=0;}
  // Jump
  if(keys[" "] && !player.jumping){player.vy=-10;player.jumping=true;}
  // Draw player
  ctx.fillStyle=player.color;ctx.fillRect(player.x,player.y,player.w,player.h);
  requestAnimationFrame(loop);
}
loop();

// Show games
function showObby(){addChat("Obby selected");}
function showTycoon(){addChat("Tycoon selected");}

// Mobile controls
if(/Mobi|Android/i.test(navigator.userAgent)){
  addChat("Mobile mode detected");
  let left=document.createElement("button"),right=document.createElement("button"),jump=document.createElement("button");
  left.textContent="◀";right.textContent="▶";jump.textContent="▲";
  left.style.position=right.style.position=jump.style.position="absolute";
  left.style.bottom=right.style.bottom=jump.style.bottom="50px";
  left.style.left="10px";right.style.left="60px";jump.style.right="10px";
  left.onclick=()=>player.x-=5;right.onclick=()=>player.x+=5;jump.onclick=()=>{if(!player.jumping){player.vy=-10;player.jumping=true;}};
  document.body.appendChild(left);document.body.appendChild(right);document.body.appendChild(jump);
}
</script>
</body>
</html>
