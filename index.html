<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>EedesiaBlox</title>
<style>
body {
  margin:0; font-family: 'Verdana', sans-serif;
  background: linear-gradient(45deg, red, yellow, orange, green);
  overflow:hidden;
  color:white;
}
button {padding:5px 10px;margin:2px;font-weight:bold;cursor:pointer;}
#uiToggle {position:fixed;top:10px;right:10px;z-index:1000;}
#ui {position:absolute;top:50px;left:10px;}
#chat {position:fixed;top:50px;right:10px;width:200px;height:300px;background:rgba(0,0,0,0.5);overflow:auto;display:none;}
#chatInput {width:100%;box-sizing:border-box;}
#obby {position:absolute;bottom:0;width:100%;height:400px;background:#222;}
.player {position:absolute;width:30px;height:30px;background:blue;}
.obstacle {position:absolute;width:50px;height:50px;background:red;}
#tycoon {position:absolute;top:10px;left:200px;width:300px;height:200px;background:#333;padding:5px;overflow:auto;}
#mobileControls {position:fixed;bottom:10px;left:50%;transform:translateX(-50%);display:none;}
#mobileControls button {width:50px;height:50px;margin:2px;}
</style>
</head>
<body>

<button id="uiToggle">Toggle UI</button>
<div id="ui">
  <button id="loginBtn">Login</button>
  <button id="signupBtn">Sign Up</button>
  <button id="obbyBtn">Obby</button>
  <button id="tycoonBtn">Tycoon</button>
  <button id="musicBtn">Music On</button>
  <button id="chatBtn">Chat</button>
</div>

<div id="chat">
  <div id="messages"></div>
  <input id="chatInput" placeholder="Type message">
</div>

<div id="obby"></div>
<div class="player" id="player"></div>
<div id="tycoon"></div>

<div id="mobileControls">
  <button id="leftBtn">←</button>
  <button id="jumpBtn">↑</button>
  <button id="rightBtn">→</button>
</div>

<audio id="music" loop>
  <source src="https://www.roblox.com/asset/?id=1841281032" type="audio/mpeg">
</audio>

<script>
// UI Toggle
const ui = document.getElementById('ui');
document.getElementById('uiToggle').onclick = () => ui.style.display = (ui.style.display=='none')?'block':'none';

// Music Toggle
const music = document.getElementById('music');
let musicOn = true;
document.getElementById('musicBtn').onclick = ()=>{
  musicOn = !musicOn;
  if(musicOn) music.play(); else music.pause();
  document.getElementById('musicBtn').innerText = musicOn?'Music On':'Music Off';
};
music.play();

// Chat Toggle
const chat = document.getElementById('chat');
document.getElementById('chatBtn').onclick = () => {
  chat.style.display = (chat.style.display=='none')?'block':'none';
};

// Chat System
const messages = document.getElementById('messages');
const chatInput = document.getElementById('chatInput');
const toxicWords = ['badword','sex','toxic'];
chatInput.addEventListener('keydown', e=>{
  if(e.key=='Enter'){
    let msg = chatInput.value;
    chatInput.value='';
    let lower = msg.toLowerCase();
    let blocked = toxicWords.some(w=>lower.includes(w));
    if(blocked){alert('Message blocked due to toxic content'); return;}
    let div = document.createElement('div'); div.innerText = msg; messages.appendChild(div);
    setTimeout(()=>div.remove(),30000);
  }
});

// Obby logic
const player = document.getElementById('player');
let px=100,py=350,vy=0,jumping=false,gravity=0.5;
const obstacles = [];
const obby = document.getElementById('obby');
function createObstacles(){
  for(let i=0;i<5;i++){
    let obs = document.createElement('div');
    obs.className='obstacle';
    obs.style.left=(i*100+50)+'px';
    obs.style.bottom='50px';
    obby.appendChild(obs);
    obstacles.push(obs);
  }
}
createObstacles();

function updateObby(){
  vy+=gravity;
  py+=vy;
  if(py>350){py=350;vy=0;jumping=false;}
  obstacles.forEach(o=>{
    let ox = parseInt(o.style.left);
    let oy = parseInt(o.style.bottom);
    if(px+30>ox && px<ox+50 && py<oy+50 && py+30>oy){py=oy+50;vy=0;jumping=false;}
  });
  player.style.left=px+'px';
  player.style.bottom=py+'px';
  requestAnimationFrame(updateObby);
}
updateObby();

// Player controls
let left=false,right=false;
document.addEventListener('keydown',e=>{
  if(e.key=='ArrowLeft') left=true;
  if(e.key=='ArrowRight') right=true;
  if(e.key=='ArrowUp' && !jumping){vy=-10;jumping=true;}
});
document.addEventListener('keyup',e=>{
  if(e.key=='ArrowLeft') left=false;
  if(e.key=='ArrowRight') right=false;
});
function movePlayer(){
  if(left) px-=5;
  if(right) px+=5;
  requestAnimationFrame(movePlayer);
}
movePlayer();

// Mobile controls
const mobile = document.getElementById('mobileControls');
if(/Mobi|Android/i.test(navigator.userAgent)) mobile.style.display='block';
document.getElementById('leftBtn').onmousedown=()=>left=true; document.getElementById('leftBtn').onmouseup=()=>left=false;
document.getElementById('rightBtn').onmousedown=()=>right=true; document.getElementById('rightBtn').onmouseup=()=>right=false;
document.getElementById('jumpBtn').onclick=()=>{if(!jumping){vy=-10;jumping=true;}};

// Tycoon Clicker
const tycoon = document.getElementById('tycoon');
let money = 0;
function createTycoon(){
  tycoon.innerHTML='<h3>Retro Tycoon</h3><div>Money: <span id="money">0</span></div><button id="clicker">Click</button>';
  document.getElementById('clicker').onclick=()=>{
    money+=1;
    document.getElementById('money').innerText=money;
  };
}
createTycoon();
</script>

</body>
</html>
