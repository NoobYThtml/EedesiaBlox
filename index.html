<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>EedesiaBlox</title>
<style>
body,html{margin:0;padding:0;height:100%;overflow:hidden;font-family:Arial, sans-serif;}
body{background:linear-gradient(135deg,red,yellow,orange,green);color:white;}
#mainMenu,#obby,#tycoon,#chatBox,#loginBox,#signupBox,#musicBtn,#uiToggle{position:absolute;}
#mainMenu,#obby,#tycoon,#loginBox,#signupBox{top:50%;left:50%;transform:translate(-50%,-50%);}
button{padding:10px;margin:5px;border:none;border-radius:5px;cursor:pointer;}
#chatBox{right:10px;top:50%;transform:translateY(-50%);width:200px;height:300px;overflow-y:auto;background:rgba(0,0,0,0.5);padding:5px;display:none;}
#chatInput{width:calc(100% - 10px);}
#musicBtn,#uiToggle{top:10px;}
#musicBtn{left:10px;}#uiToggle{right:10px;}
#obbyCanvas{background:#222;width:400px;height:300px;display:block;margin:auto;border:3px solid #fff;}
</style>
</head>
<body>

<!-- Main Menu -->
<div id="mainMenu">
<h1>EedesiaBlox</h1>
<button onclick="showLogin()">Login</button>
<button onclick="showSignup()">Sign Up</button>
<button onclick="enterObby()">Play Obby</button>
<button onclick="enterTycoon()">Play Tycoon</button>
<button onclick="toggleChat()">Chat</button>
</div>

<!-- Login -->
<div id="loginBox" style="display:none;">
<h2>Login</h2>
<input id="loginUser" placeholder="Username"><br>
<input id="loginPass" type="password" placeholder="Password"><br>
<button onclick="login()">Login</button>
<button onclick="closeLogin()">Back</button>
</div>

<!-- Signup -->
<div id="signupBox" style="display:none;">
<h2>Sign Up</h2>
<input id="signupUser" placeholder="Username"><br>
<input id="signupPass" type="password" placeholder="Password"><br>
<button onclick="signup()">Sign Up</button>
<button onclick="closeSignup()">Back</button>
</div>

<!-- Obby -->
<div id="obby" style="display:none;">
<canvas id="obbyCanvas"></canvas><br>
<button onclick="backToHub()">Back to Hub</button>
</div>

<!-- Tycoon -->
<div id="tycoon" style="display:none;">
<h2>Tycoon</h2>
<button onclick="earnCoin()">Collect Coin</button><br>
Coins: <span id="coins">0</span><br>
<button onclick="backToHub()">Back to Hub</button>
</div>

<!-- Chat -->
<div id="chatBox">
<div id="chatMessages"></div>
<input id="chatInput" placeholder="Type..." onkeydown="if(event.key==='Enter'){sendChat();}">
</div>

<!-- Music & UI Toggle -->
<button id="musicBtn" onclick="toggleMusic()">Music: On</button>
<button id="uiToggle" onclick="toggleUI()">Toggle UI</button>

<audio id="music" loop src="winds_of_fjords.mp3"></audio>

<script>
// --- Simple Account System ---
let accounts=JSON.parse(localStorage.getItem('accounts')||'{}'),currentUser=null;
function showLogin(){document.getElementById('loginBox').style.display='block';document.getElementById('mainMenu').style.display='none';}
function closeLogin(){document.getElementById('loginBox').style.display='none';document.getElementById('mainMenu').style.display='block';}
function showSignup(){document.getElementById('signupBox').style.display='block';document.getElementById('mainMenu').style.display='none';}
function closeSignup(){document.getElementById('signupBox').style.display='none';document.getElementById('mainMenu').style.display='block';}
function login(){let u=document.getElementById('loginUser').value,p=document.getElementById('loginPass').value;
if(accounts[u]&&accounts[u]===p){currentUser=u;alert('Logged in');closeLogin();}else alert('Invalid');}
function signup(){let u=document.getElementById('signupUser').value,p=document.getElementById('signupPass').value;
if(accounts[u]){alert('Exists');return;}accounts[u]=p;localStorage.setItem('accounts',JSON.stringify(accounts));currentUser=u;alert('Account created');closeSignup();}

// --- UI Toggles ---
function toggleUI(){document.getElementById('mainMenu').style.display=document.getElementById('mainMenu').style.display==='none'?'block':'none';
document.getElementById('obby').style.display='none';document.getElementById('tycoon').style.display='none';}

// --- Music ---
let musicPlaying=true;function toggleMusic(){let m=document.getElementById('music');musicPlaying=!musicPlaying;musicPlaying?m.play():m.pause();
document.getElementById('musicBtn').innerText='Music: '+(musicPlaying?'On':'Off');}

// --- Chat ---
let chatVisible=false;function toggleChat(){chatVisible=!chatVisible;document.getElementById('chatBox').style.display=chatVisible?'block':'none';}
function sendChat(){let input=document.getElementById('chatInput'),msg=input.value.trim();if(!msg)return;
// --- Chat Filter ---
let bannedWords=['swear1','swear2'],warned=false;
if(msg.toLowerCase().includes('sexual content')){alert('Account terminated');delete accounts[currentUser];localStorage.setItem('accounts',JSON.stringify(accounts));currentUser=null;toggleChat();return;}
if(bannedWords.some(w=>msg.toLowerCase().includes(w))){alert('Banned 1h');return;}
if(msg.toLowerCase().includes('toxic')){if(warned){alert('Banned 1h');return;}else{warned=true;alert('Warned for toxicity');}}
let chat=document.getElementById('chatMessages');chat.innerHTML+='<div>'+currentUser+': '+msg+'</div>';input.value='';chat.scrollTop=chat.scrollHeight;
setTimeout(()=>{chat.innerHTML='';},30000);}

// --- Games ---
let coins=0;
function enterObby(){document.getElementById('mainMenu').style.display='none';document.getElementById('obby').style.display='block';initObby();}
function enterTycoon(){document.getElementById('mainMenu').style.display='none';document.getElementById('tycoon').style.display='block';}
function backToHub(){document.getElementById('obby').style.display='none';document.getElementById('tycoon').style.display='none';document.getElementById('mainMenu').style.display='block';}
function earnCoin(){coins++;document.getElementById('coins').innerText=coins;}

// --- Obby Platformer ---
let obbyCanvas,ctx,player={x:50,y:250,w:20,h:20,vx:0,vy:0,jumping:false},keys={};
function initObby(){obbyCanvas=document.getElementById('obbyCanvas');ctx=obbyCanvas.getContext('2d');document.addEventListener('keydown',e=>keys[e.key]=true);
document.addEventListener('keyup',e=>keys[e.key]=false);requestAnimationFrame(obbyLoop);}
function obbyLoop(){ctx.clearRect(0,0,obbyCanvas.width,obbyCanvas.height);
// --- Basic platform ---
ctx.fillStyle='white';ctx.fillRect(0,280,400,20);
player.vx=0;if(keys['ArrowLeft'])player.vx=-2;if(keys['ArrowRight'])player.vx=2;if(keys['ArrowUp']&&!player.jumping){player.vy=-5;player.jumping=true;}
player.vy+=0.2;player.x+=player.vx;player.y+=player.vy;if(player.y>260){player.y=260;player.vy=0;player.jumping=false;}
ctx.fillStyle='red';ctx.fillRect(player.x,player.y,player.w,player.h);requestAnimationFrame(obbyLoop);}
</script>
</body>
</html>
