<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Eedesiablox</title>
<style>
body { margin:0; font-family:Verdana,sans-serif; background:linear-gradient(135deg,red,yellow,orange,green); color:#fff; overflow:hidden; }
header { text-align:center; padding:10px; font-size:2em; text-shadow:2px 2px #000; }
button { padding:5px 10px; margin:3px; cursor:pointer; }
#gameContainer, #tycoon { position:absolute; top:60px; left:0; right:0; bottom:0; display:none; background:#111; }
#chatBox { position:fixed; right:10px; top:50%; transform:translateY(-50%); width:200px; height:300px; background:rgba(0,0,0,0.5); overflow-y:auto; padding:5px; font-size:14px; display:none; }
#chatInput { width:100%; margin-top:5px; }
@media(max-width:768px){ #chatBox { width:150px; height:200px; font-size:12px; } #chatInput { font-size:12px; } }
#uiButtons{position:fixed; top:10px; left:10px;}
</style>
</head>
<body>

<header>Eedesiablox</header>

<div id="mainMenu">
  <button onclick="showGame()">Play Obby</button>
  <button onclick="showTycoon()">Play Tycoon</button>
  <button id="musicBtn">Music: OFF</button>
  <button onclick="toggleChat()">Chat</button>
  <button onclick="toggleUI()">Toggle UI</button>
</div>

<div id="gameContainer"></div>
<div id="tycoon"></div>

<div id="chatBox">
  <div id="messages"></div>
  <input id="chatInput" placeholder="Type..." onkeydown="if(event.key==='Enter'){sendChat();}">
</div>

<audio id="bgMusic" loop>
  <source src="winds_of_fjords.mp3" type="audio/mpeg">
</audio>

<div id="uiButtons"></div>

<script>
// --- MUSIC ---
const music = document.getElementById("bgMusic");
const musicBtn = document.getElementById("musicBtn");
let musicOn=false;
musicBtn.onclick = () => {
  if(!musicOn){ music.play().catch(()=>{}); musicOn=true; musicBtn.textContent="Music: ON"; }
  else{ music.pause(); musicOn=false; musicBtn.textContent="Music: OFF"; }
};

// --- UI TOGGLE ---
let uiVisible=true;
function toggleUI(){ uiVisible=!uiVisible; document.getElementById("mainMenu").style.display=uiVisible?'block':'none'; }

// --- CHAT ---
const chatBox = document.getElementById("chatBox");
let chatVisible=false;
function toggleChat(){ chatVisible=!chatVisible; chatBox.style.display=chatVisible?'block':'none'; }
const messages = document.getElementById("messages");
let toxicWords=['swear','toxic','sexial content'];
function sendChat(){
  const input=document.getElementById("chatInput");
  let msg=input.value.trim(); if(!msg) return;
  let banned=false, warn=false, terminate=false;
  toxicWords.forEach(word=>{
    if(msg.toLowerCase().includes(word)){
      if(word==='sexial content') terminate=true;
      else if(word==='swear') banned=true;
      else warn=true;
    }
  });
  if(terminate){ alert("Account terminated!"); input.value=''; return; }
  if(banned){ alert("You are banned for 1h!"); input.value=''; return; }
  if(warn) alert("Warning: Toxic behavior!");
  const p=document.createElement("p"); p.textContent=msg; messages.appendChild(p);
  input.value=''; messages.scrollTop=messages.scrollHeight;
  setTimeout(()=>{ p.remove(); },30000);
}

// --- GAME & TYCOON ---
const gameContainer=document.getElementById("gameContainer");
const tycoon=document.getElementById("tycoon");
function showGame(){ gameContainer.style.display='block'; tycoon.style.display='none'; loadObby(); }
function showTycoon(){ tycoon.style.display='block'; gameContainer.style.display='none'; loadTycoon(); }

// --- MOBILE DETECTION & CONTROLS ---
const isMobile = /Mobi|Android/i.test(navigator.userAgent);

// --- OBby Game ---
function loadObby(){
  gameContainer.innerHTML='';
  const player=document.createElement('div');
  player.style.width='30px'; player.style.height='30px'; player.style.background='cyan'; player.style.position='absolute'; player.style.left='50px'; player.style.bottom='0px';
  gameContainer.appendChild(player);
  let left=false,right=false,jumping=false,y=0,vx=0,vy=0,gravity=0.5;
  // Obstacles
  const platforms=[];
  for(let i=0;i<5;i++){
    const plat=document.createElement('div');
    plat.style.width='100px'; plat.style.height='20px'; plat.style.background='red'; plat.style.position='absolute';
    plat.style.left=50+i*120+'px'; plat.style.bottom=50+i*60+'px';
    gameContainer.appendChild(plat); platforms.push(plat);
  }
  document.onkeydown=e=>{
    if(e.key==='ArrowLeft') left=true;
    if(e.key==='ArrowRight') right=true;
    if(e.key==='ArrowUp' && !jumping){ vy= -10; jumping=true; }
  };
  document.onkeyup=e=>{
    if(e.key==='ArrowLeft') left=false;
    if(e.key==='ArrowRight') right=false;
  };
  function gameLoop(){
    vx=(right-left)*5; player.style.left=parseFloat(player.style.left)+vx+'px';
    vy+=gravity; player.style.bottom=parseFloat(player.style.bottom)+vy+'px';
    if(parseFloat(player.style.bottom)<0){ player.style.bottom='0px'; vy=0; jumping=false; }
    // Platform collisions
    platforms.forEach(p=>{
      const px=parseFloat(p.style.left), py=parseFloat(p.style.bottom), pw=parseFloat(p.style.width), ph=parseFloat(p.style.height);
      const pl=parseFloat(player.style.left), pb=parseFloat(player.style.bottom), phx=parseFloat(player.style.height);
      if(pl+30>px && pl<px+pw && pb<py+ph && pb+30>py){
        player.style.bottom=py+ph+'px'; vy=0; jumping=false;
      }
    });
    requestAnimationFrame(gameLoop);
  }
  gameLoop();
}

// --- Tycoon Clicker Game ---
function loadTycoon(){
  tycoon.innerHTML='';
  const button=document.createElement('button'); button.textContent='Click for Money'; tycoon.appendChild(button);
  const moneyDisplay=document.createElement('div'); moneyDisplay.textContent='Money: 0'; tycoon.appendChild(moneyDisplay);
  let money=0;
  button.onclick=()=>{ money++; moneyDisplay.textContent='Money: '+money; };
}

// --- PLACEHOLDER: WebSocket Multiplayer ---
const wsURL="wss://yourserver.example.com";
let ws;
// ws = new WebSocket(wsURL);
// ws.onmessage = (msg)=>{ console.log(msg.data); };

</script>
</body>
</html>
