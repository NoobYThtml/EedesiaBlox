<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Eedesia Hub</title>
<style>
  body { margin:0; font-family: Arial; background:#f0f0f0; text-align:center;}
  header { background:#ff4444; color:white; padding:15px; font-size:28px;}
  .menu { display:flex; justify-content:center; margin-top:50px; gap:20px; flex-wrap:wrap;}
  .game-button { width:150px; height:100px; display:flex; justify-content:center; align-items:center; color:white; font-size:20px; font-weight:bold; border-radius:12px; cursor:pointer;}
  .red { background:#ff4d4d; }
  .green { background:#4CAF50; }
  .orange { background:#FF9800; }
  .yellow { background:#FFEB3B; color:black; }
  canvas { display:block; margin:30px auto; background:#87ceeb; }
  #back { margin-top:20px; padding:10px 20px; font-size:18px; cursor:pointer; background:#ff4444; color:white; border:none; border-radius:8px; display:none;}
</style>
</head>
<body>
<header>Eedesia Hub</header>

<div class="menu" id="menu">
  <div class="game-button red" onclick="startGame()">Obby</div>
  <div class="game-button green" onclick="alert('Tycoon coming soon!')">Tycoon</div>
  <div class="game-button orange" onclick="alert('Adventure coming soon!')">Adventure</div>
  <div class="game-button yellow" onclick="alert('Mini Game coming soon!')">Mini Game</div>
</div>

<canvas id="gameCanvas" width="800" height="600" style="display:none;"></canvas>
<button id="back" onclick="goBack()">Back to Hub</button>

<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");
const menu = document.getElementById("menu");
const backBtn = document.getElementById("back");

let player, keys, platforms, gravity, jumpPower;

function startGame(){
  menu.style.display="none";
  canvas.style.display="block";
  backBtn.style.display="block";
  initGame();
  loop();
}

// Back to hub
function goBack(){
  canvas.style.display="none";
  backBtn.style.display="none";
  menu.style.display="flex";
}

// Game initialization
function initGame(){
  player = { x:50, y:550, w:40, h:40, color:"red", dy:0, onGround:false };
  gravity=0.8; jumpPower=-15;
  keys = {};
  platforms=[];
  for(let i=0;i<10;i++){
    platforms.push({x:i*150, y:500-(i%2)*100, w:120, h:20, color:`hsl(${i*36},100%,50%)`});
  }
}

// Draw functions
function drawPlayer(){ ctx.fillStyle=player.color; ctx.fillRect(player.x,player.y,player.w,player.h);}
function drawPlatforms(){ platforms.forEach(p=>{ ctx.fillStyle=p.color; ctx.fillRect(p.x,p.y,p.w,p.h);});}

// Update player
function update(){
  player.dy+=gravity;
  player.y+=player.dy;
  if(player.y+player.h>canvas.height){ player.y=canvas.height-player.h; player.dy=0; player.onGround=true;}
  platforms.forEach(p=>{
    if(player.x< p.x+p.w && player.x+player.w>p.x && player.y+player.h<=p.y+10 && player.y+player.h+player.dy>=p.y){
      player.y=p.y-player.h; player.dy=0; player.onGround=true;
    }
  });
  if(keys["ArrowRight"]||keys["d"]) player.x+=5;
  if(keys["ArrowLeft"]||keys["a"]) player.x-=5;
}

function jump(){ if(player.onGround){ player.dy=jumpPower; player.onGround=false; } }

function loop(){
  if(canvas.style.display=="none") return; // stop loop if not visible
  ctx.clearRect(0,0,canvas.width,canvas.height);
  drawPlatforms();
  drawPlayer();
  update();
  requestAnimationFrame(loop);
}

window.addEventListener("keydown", e=>{ keys[e.key]=true; if(e.key===" "||e.key==="ArrowUp"||e.key==="w") jump();});
window.addEventListener("keyup", e=>keys[e.key]=false);
</script>
</body>
</html>
