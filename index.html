<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Eedesia Hub</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&display=swap');
  body {
    margin:0; font-family:'Playfair Display', serif; background:#f5f5f5; text-align:center;
    background-image: linear-gradient(to bottom right, #f0f0f0, #dfe6e9);
  }
  header {
    background:#ff4444; color:white; padding:15px; font-size:28px; letter-spacing:2px;
  }
  .menu { display:flex; justify-content:center; margin-top:50px; gap:20px; flex-wrap:wrap;}
  .game-button {
    width:150px; height:100px; display:flex; justify-content:center; align-items:center;
    color:white; font-size:20px; font-weight:bold; border-radius:12px; cursor:pointer;
    text-decoration:none; transition: transform 0.2s, box-shadow 0.2s;
  }
  .game-button:hover { transform: scale(1.1); box-shadow:0 8px 20px rgba(0,0,0,0.2);}
  .red { background:#ff4d4d; }
  .green { background:#4CAF50; }
  .orange { background:#FF9800; }
  .yellow { background:#FFEB3B; color:black; }
  canvas { display:block; margin:30px auto; background:#87ceeb; }
  #back { margin-top:20px; padding:10px 20px; font-size:18px; cursor:pointer; background:#ff4444; color:white; border:none; border-radius:8px; display:none;}
  /* Mobile controls */
  #mobileControls { display:none; position:fixed; bottom:20px; width:100%; display:flex; justify-content:center; gap:20px; }
  .mobile-btn { width:60px; height:60px; border-radius:50%; background:#333; color:white; font-size:24px; display:flex; justify-content:center; align-items:center; opacity:0.7; }
  .mobile-btn:active { opacity:1; }
</style>
</head>
<body>
<audio id="bgMusic" src="https://cdn.pixabay.com/download/audio/2023/05/09/audio_67c3b31a96.mp3?filename=winds-of-fjords-111997.mp3" autoplay loop></audio>

<header>Eedesia Hub</header>

<div class="menu" id="menu">
  <div class="game-button red" onclick="startGame()">Obby</div>
  <div class="game-button green" onclick="alert('Tycoon coming soon!')">Tycoon</div>
  <div class="game-button orange" onclick="alert('Adventure coming soon!')">Adventure</div>
  <div class="game-button yellow" onclick="alert('Mini Game coming soon!')">Mini Game</div>
</div>

<canvas id="gameCanvas" width="800" height="600" style="display:none;"></canvas>
<button id="back" onclick="goBack()">Back to Hub</button>

<!-- Mobile Controls -->
<div id="mobileControls">
  <div class="mobile-btn" id="leftBtn">◀</div>
  <div class="mobile-btn" id="jumpBtn">▲</div>
  <div class="mobile-btn" id="rightBtn">▶</div>
</div>

<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");
const menu = document.getElementById("menu");
const backBtn = document.getElementById("back");
const mobileControls = document.getElementById("mobileControls");

let player, keys, platforms, gravity, jumpPower;

// Detect mobile
const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
if(isMobile) mobileControls.style.display="flex";

function startGame(){
  menu.style.display="none";
  canvas.style.display="block";
  backBtn.style.display="block";
  if(isMobile) mobileControls.style.display="flex";
  initGame();
  loop();
}

// Back to hub
function goBack(){
  canvas.style.display="none";
  backBtn.style.display="none";
  menu.style.display="flex";
  if(isMobile) mobileControls.style.display="none";
}

// Game initialization
function initGame(){
  player = { x:50, y:550, w:40, h:40, color:"red", dy:0, onGround:false };
  gravity=0.8; jumpPower=-15;
  keys = {};
  platforms=[];
  for(let i=0;i<10;i++){
    platforms.push({x:i*150, y:500-(i%2)*100, w:120, h:20, color:`hsl(${i*36},100%,50%)`});
  }
}

// Draw functions
function drawPlayer(){ ctx.fillStyle=player.color; ctx.fillRect(player.x,player.y,player.w,player.h);}
function drawPlatforms(){ platforms.forEach(p=>{ ctx.fillStyle=p.color; ctx.fillRect(p.x,p.y,p.w,p.h);});}

// Update player
function update(){
  player.dy+=gravity;
  player.y+=player.dy;
  if(player.y+player.h>canvas.height){ player.y=canvas.height-player.h; player.dy=0; player.onGround=true;}
  platforms.forEach(p=>{
    if(player.x< p.x+p.w && player.x+player.w>p.x && player.y+player.h<=p.y+10 && player.y+player.h+player.dy>=p.y){
      player.y=p.y-player.h; player.dy=0; player.onGround=true;
    }
  });
  if(keys["ArrowRight"]||keys["d"]) player.x+=5;
  if(keys["ArrowLeft"]||keys["a"]) player.x-=5;
}

function jump(){ if(player.onGround){ player.dy=jumpPower; player.onGround=false; } }

function loop(){
  if(canvas.style.display=="none") return;
  ctx.clearRect(0,0,canvas.width,canvas.height);
  drawPlatforms();
  drawPlayer();
  update();
  requestAnimationFrame(loop);
}

// Keyboard events
window.addEventListener("keydown", e=>{ keys[e.key]=true; if(e.key===" "||e.key==="ArrowUp"||e.key==="w") jump();});
window.addEventListener("keyup", e=>keys[e.key]=false);

// Mobile button events
if(isMobile){
  document.getElementById("leftBtn").addEventListener("touchstart",()=>keys["ArrowLeft"]=true);
  document.getElementById("leftBtn").addEventListener("touchend",()=>keys["ArrowLeft"]=false);
  document.getElementById("rightBtn").addEventListener("touchstart",()=>keys["ArrowRight"]=true);
  document.getElementById("rightBtn").addEventListener("touchend",()=>keys["ArrowRight"]=false);
  document.getElementById("jumpBtn").addEventListener("touchstart",()=>jump());
}
</script>
</body>
</html>
